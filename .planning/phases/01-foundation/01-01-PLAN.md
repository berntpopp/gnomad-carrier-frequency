---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - vite.config.ts
  - index.html
  - src/main.ts
  - src/App.vue
  - src/vite-env.d.ts
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Project initializes without errors with bun install"
    - "Dev server starts and shows Vue app at localhost"
    - "TypeScript compilation succeeds with strict mode"
    - "Vuetify theme renders correctly"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies including vue, vuetify, villus, vueuse"
      contains: "villus"
    - path: "vite.config.ts"
      provides: "Vite configuration with Vue plugin"
      contains: "vue()"
    - path: "src/main.ts"
      provides: "App entry point with Vuetify and villus setup"
      contains: "createVuetify"
    - path: "src/App.vue"
      provides: "Root Vue component with Vuetify wrapper"
      contains: "v-app"
  key_links:
    - from: "src/main.ts"
      to: "src/App.vue"
      via: "createApp mount"
      pattern: "createApp.*App.*mount"
    - from: "src/main.ts"
      to: "villus client"
      via: "app.use"
      pattern: "app\\.use.*graphqlClient"
---

<objective>
Initialize the Vue 3 + Vuetify 3 + TypeScript project with Bun, including GraphQL client setup for gnomAD API integration.

Purpose: Establish the foundational project structure that all subsequent plans build upon.
Output: Runnable development environment with Vue, Vuetify, villus GraphQL client, and TypeScript configured.
</objective>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Bun + Vue + Vuetify project</name>
  <files>
    - package.json
    - tsconfig.json
    - vite.config.ts
    - index.html
    - src/main.ts
    - src/App.vue
    - src/vite-env.d.ts
    - .gitignore
  </files>
  <action>
Create a new Vue 3 project with Bun:

1. Initialize with `bun create vite . --template vue-ts` (use current directory)
2. Install dependencies:
   ```bash
   bun add vue vuetify @mdi/font
   bun add villus graphql @vueuse/core
   bun add -d @vitejs/plugin-vue vite typescript vue-tsc sass
   ```

3. Configure vite.config.ts:
   - Import and use @vitejs/plugin-vue
   - Configure resolve alias for @ -> src

4. Configure tsconfig.json:
   - Enable strict mode
   - Set moduleResolution to bundler
   - Include path alias for @/*

5. Set up src/main.ts:
   - Create Vuetify instance with md3 theme (light mode default)
   - Create villus client pointing to https://gnomad.broadinstitute.org/api
   - Mount app with both plugins

6. Create src/App.vue:
   - Wrap in v-app component
   - Add v-main with placeholder content: "gnomAD Carrier Frequency Calculator"
   - Use Vuetify typography classes

7. Update .gitignore:
   - Add node_modules, dist, .vite, *.local
  </action>
  <verify>
Run: `bun install && bun run dev`
- No errors during install
- Dev server starts on localhost
- Browser shows "gnomAD Carrier Frequency Calculator" text
- Vue DevTools shows app mounted
  </verify>
  <done>
- bun install completes without errors
- bun run dev starts Vite dev server
- App renders with Vuetify styling
- TypeScript compiles without errors (bun run build succeeds)
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify GraphQL client connectivity</name>
  <files>
    - src/api/client.ts
    - src/api/index.ts
  </files>
  <action>
Create the GraphQL client module:

1. Create src/api/client.ts:
   ```typescript
   import { createClient } from 'villus';

   export const graphqlClient = createClient({
     url: 'https://gnomad.broadinstitute.org/api',
   });
   ```

2. Create src/api/index.ts:
   - Re-export graphqlClient

3. Update src/main.ts:
   - Import graphqlClient from @/api
   - Use app.use(graphqlClient) before mount

4. Add a temporary test in App.vue to verify connectivity:
   - Use villus useQuery to run a simple gene_search query for "BRCA"
   - Display loading state, then results count or error
   - This is a smoke test - will be replaced in later plans
  </action>
  <verify>
Run: `bun run dev`
- Open browser console - no CORS errors
- Page shows loading state briefly
- Results appear (gene_search returns BRCA1, BRCA2, etc.)
- No GraphQL errors in console
  </verify>
  <done>
- GraphQL client successfully connects to gnomAD API
- No CORS blocking (gnomAD allows browser requests)
- Temporary test query returns data
- Ready for real queries in subsequent plans
  </done>
</task>

</tasks>

<verification>
1. `bun install` - no errors
2. `bun run dev` - server starts
3. `bun run build` - TypeScript compiles, build succeeds
4. Browser shows app with Vuetify styling
5. Gene search test returns results from gnomAD API
</verification>

<success_criteria>
- Project runs locally with `bun run dev`
- TypeScript strict mode enabled and passing
- Vuetify components render correctly
- villus GraphQL client connects to gnomAD API without CORS issues
- All dependencies installed: vue, vuetify, villus, graphql, @vueuse/core
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
