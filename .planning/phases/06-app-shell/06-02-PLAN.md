---
phase: 06-app-shell
plan: 02
type: execute
wave: 2
depends_on: [06-01]
files_modified:
  - src/components/AppBar.vue
  - src/components/AppFooter.vue
  - src/components/SettingsDialog.vue
  - src/App.vue
autonomous: true

must_haves:
  truths:
    - "User sees gCFCalc logo in app bar"
    - "User can open settings dialog via gear icon"
    - "User can close settings dialog via X or Cancel"
    - "User sees GitHub and gnomAD icons in footer"
  artifacts:
    - path: "src/components/AppBar.vue"
      provides: "App bar with logo, theme toggle, settings gear"
      contains: "gCFCalc"
    - path: "src/components/AppFooter.vue"
      provides: "Footer with GitHub, version, gnomAD links"
      contains: "mdi-github"
    - path: "src/components/SettingsDialog.vue"
      provides: "Modal dialog with tabbed structure"
      exports: ["default"]
    - path: "src/App.vue"
      provides: "App shell with settings dialog integration"
      contains: "SettingsDialog"
  key_links:
    - from: "src/components/AppBar.vue"
      to: "App.vue"
      via: "emit openSettings event"
      pattern: "emit.*openSettings|@openSettings"
    - from: "src/App.vue"
      to: "src/components/SettingsDialog.vue"
      via: "v-model binding"
      pattern: "v-model.*showSettings"
---

<objective>
Enhance app shell with branded logo, settings access, and external links to complete Phase 6 requirements.

Purpose: Professional app shell with all SHELL-01/02/03/07 requirements implemented.
Output: Updated AppBar with logo and settings, updated AppFooter with icons, SettingsDialog component.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-app-shell/06-CONTEXT.md
@.planning/phases/06-app-shell/06-RESEARCH.md
@.planning/phases/06-app-shell/06-01-SUMMARY.md
@src/components/AppBar.vue
@src/components/AppFooter.vue
@src/App.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Enhance AppBar with logo and settings gear</name>
  <files>src/components/AppBar.vue</files>
  <action>
    Update AppBar.vue with:

    1. **App bar styling:**
       - Add density="compact" prop (48px height per CONTEXT)
       - Add :elevation="2" prop (subtle shadow)

    2. **Logo (left side):**
       - Replace v-app-bar-title content with "gCFCalc"
       - Add class="text-body-1 font-weight-bold" for styling
       - Keep as v-app-bar-title component

    3. **Settings gear button (right side):**
       - Add v-btn after theme toggle button
       - Icon: mdi-cog
       - variant="text", icon prop
       - Add v-tooltip with "Settings" text (location="bottom")
       - Emit 'openSettings' event on click

    4. **Update defineEmits:**
       - Add defineEmits<{ openSettings: [] }>()
       - Wire click handler to emit

    5. **Tooltip consistency:**
       - Add v-tooltip to theme toggle button (same pattern as settings)
       - Keep existing :title as fallback, add v-tooltip for visual consistency

    Order right-to-left: v-spacer, theme-toggle, settings-gear
  </action>
  <verify>
    bun run typecheck passes
    bun run lint passes
    grep "gCFCalc" src/components/AppBar.vue returns match
    grep "mdi-cog" src/components/AppBar.vue returns match
    grep "openSettings" src/components/AppBar.vue returns match
    grep 'density="compact"' src/components/AppBar.vue returns match
  </verify>
  <done>
    - AppBar shows "gCFCalc" as logo text
    - AppBar has 48px compact height
    - Settings gear button visible with tooltip
    - Clicking gear emits openSettings event
  </done>
</task>

<task type="auto">
  <name>Task 2: Enhance AppFooter with icon links</name>
  <files>src/components/AppFooter.vue</files>
  <action>
    Update AppFooter.vue to add GitHub and gnomAD icons:

    1. **Layout structure:**
       - Keep existing v-footer with app, text-caption, text-medium-emphasis
       - Add justify-center and ga-2 (gap) classes
       - Use flexbox with items separated by pipe (|) dividers

    2. **GitHub icon (left):**
       - v-btn icon variant="text" size="small"
       - href="https://github.com/berntpopp/gnomad-carrier-frequency"
       - target="_blank" rel="noopener noreferrer"
       - v-icon size="small" mdi-github
       - v-tooltip "Source code on GitHub" (location="top")

    3. **Version (center - existing):**
       - Keep existing version link structure
       - Wrap with span for pipe dividers: | v{{ version }} |

    4. **gnomAD icon (right):**
       - v-btn icon variant="text" size="small"
       - href="https://gnomad.broadinstitute.org/"
       - target="_blank" rel="noopener noreferrer"
       - v-icon size="small" mdi-database
       - v-tooltip "gnomAD database" (location="top")

    5. **Divider styling:**
       - Use span with class="mx-2" for pipe characters
       - Text color inherits from footer (text-medium-emphasis)
  </action>
  <verify>
    bun run typecheck passes
    bun run lint passes
    grep "mdi-github" src/components/AppFooter.vue returns match
    grep "mdi-database" src/components/AppFooter.vue returns match
    grep "gnomad.broadinstitute.org" src/components/AppFooter.vue returns match
  </verify>
  <done>
    - Footer shows GitHub icon with tooltip
    - Footer shows version link (unchanged behavior)
    - Footer shows gnomAD icon with tooltip
    - All links open in new tab
  </done>
</task>

<task type="auto">
  <name>Task 3: Create SettingsDialog component and integrate</name>
  <files>src/components/SettingsDialog.vue, src/App.vue</files>
  <action>
    1. **Create src/components/SettingsDialog.vue:**
       - Props: modelValue (boolean) with defineModel
       - Emits: update:modelValue

       Template structure:
       ```
       v-dialog
         v-model bound to modelValue
         max-width="600"
         persistent (prevents accidental close)

         v-card
           v-card-title (flex row)
             span "Settings"
             v-spacer
             v-btn icon variant="text" @click close
               v-icon mdi-close

           v-tabs v-model="activeTab"
             v-tab value="general" "General"
             v-tab value="filters" "Filters"  (placeholder)
             v-tab value="templates" "Templates" (placeholder)

           v-card-text
             v-tabs-window v-model="activeTab"
               v-tabs-window-item value="general"
                 p.text-body-2 "General settings will appear here."
               v-tabs-window-item value="filters"
                 p.text-body-2 "Filter configuration will appear here."
               v-tabs-window-item value="templates"
                 p.text-body-2 "Template editing will appear here."

           v-card-actions
             v-spacer
             v-btn variant="text" @click close "Cancel"
             v-btn color="primary" @click save "Save"
       ```

       Script:
       - const modelValue = defineModel<boolean>()
       - const activeTab = ref('general')
       - close(): modelValue.value = false
       - save(): for now, just close (content added in later phases)

    2. **Update src/App.vue:**
       - Import SettingsDialog component
       - Add ref showSettings = ref(false)
       - Add SettingsDialog with v-model="showSettings"
       - Wire AppBar @openSettings="showSettings = true"
  </action>
  <verify>
    bun run typecheck passes
    bun run lint passes
    bun run build succeeds
    grep "SettingsDialog" src/App.vue returns match
    grep "v-tabs-window" src/components/SettingsDialog.vue returns match
    grep "persistent" src/components/SettingsDialog.vue returns match
  </verify>
  <done>
    - SettingsDialog.vue exists with tabbed structure
    - Dialog opens when clicking settings gear in AppBar
    - Dialog closes via X button, Cancel, or Save
    - Dialog has General, Filters, Templates tabs (placeholder content)
    - Dialog is persistent (no close on outside click)
  </done>
</task>

</tasks>

<verification>
After all tasks:
1. bun run build - succeeds
2. bun run dev - app runs
3. Visual checks:
   - AppBar shows "gCFCalc" logo on left
   - AppBar is compact height (~48px)
   - Settings gear icon visible, has tooltip
   - Clicking gear opens settings dialog
   - Dialog has 3 tabs (General, Filters, Templates)
   - Cancel closes dialog, Save closes dialog
   - Footer shows GitHub icon, version, gnomAD icon
   - All footer links work (open in new tab)
</verification>

<success_criteria>
1. Logo "gCFCalc" visible in app bar (SHELL-01)
2. Settings accessible via gear icon (SHELL-03)
3. Settings dialog opens with tabbed interface
4. Footer has icon links to GitHub and gnomAD
5. All tooltips display correctly
6. Build passes, no TypeScript errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-app-shell/06-02-SUMMARY.md`
</output>
