---
phase: 04-deploy
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - eslint.config.js
  - package.json
  - vite.config.ts
autonomous: true

must_haves:
  truths:
    - "npm run lint executes ESLint without errors"
    - "npm run typecheck executes vue-tsc without errors"
    - "npm run build succeeds with base path configured"
  artifacts:
    - path: "eslint.config.js"
      provides: "ESLint flat config for Vue 3 + TypeScript"
      contains: "eslint-plugin-vue"
    - path: "package.json"
      provides: "lint and typecheck scripts"
      contains: "\"lint\":"
    - path: "vite.config.ts"
      provides: "GitHub Pages base path"
      contains: "base:"
  key_links:
    - from: "eslint.config.js"
      to: "src/**/*.{vue,ts}"
      via: "ESLint configuration"
      pattern: "flat/recommended"
    - from: "package.json"
      to: "eslint.config.js"
      via: "lint script invokes ESLint"
      pattern: "\"lint\":"
---

<objective>
Configure ESLint and build settings for CI/CD readiness.

Purpose: Enable automated code quality checks (lint, typecheck) and configure Vite for GitHub Pages deployment subdirectory.

Output: Working ESLint configuration, updated package.json scripts, and vite.config.ts with base path.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-deploy/04-RESEARCH.md

@vite.config.ts
@package.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add ESLint with Vue 3 + TypeScript flat config</name>
  <files>eslint.config.js, package.json</files>
  <action>
Install ESLint dependencies:
```bash
npm install --save-dev eslint eslint-plugin-vue @vue/eslint-config-typescript typescript-eslint
```

Create `eslint.config.js` using the official Vue flat config pattern:
```javascript
import pluginVue from 'eslint-plugin-vue'
import {
  defineConfigWithVueTs,
  vueTsConfigs,
} from '@vue/eslint-config-typescript'

export default defineConfigWithVueTs(
  pluginVue.configs['flat/recommended'],
  vueTsConfigs.recommended,
)
```

This is the recommended setup from eslint.vuejs.org for Vue 3 + TypeScript projects using ESLint 9 flat config.

Do NOT use .eslintrc.* files - these are deprecated and will be removed in ESLint 10.
  </action>
  <verify>
Run `npm run lint` after adding the lint script (Task 2). File should exist and be valid JavaScript module.
  </verify>
  <done>eslint.config.js exists with Vue + TypeScript flat config, ESLint dependencies installed in package.json</done>
</task>

<task type="auto">
  <name>Task 2: Update vite.config.ts and package.json scripts</name>
  <files>vite.config.ts, package.json</files>
  <action>
Add scripts to package.json:
```json
{
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc -b && vite build",
    "preview": "vite preview",
    "lint": "eslint .",
    "typecheck": "vue-tsc --noEmit"
  }
}
```

Note: Using `eslint .` instead of `eslint src --ext .vue,.ts` because ESLint 9 flat config handles file extensions automatically.

Update vite.config.ts to add GitHub Pages base path:
```typescript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { fileURLToPath, URL } from 'node:url'

export default defineConfig({
  plugins: [vue()],
  base: '/gnomad-carrier-frequency/',  // GitHub Pages subdirectory
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  server: {
    // WSL2 with Windows filesystem requires polling for file watching
    watch: {
      usePolling: true,
      interval: 100,
    },
    hmr: {
      overlay: true,
    },
  },
})
```

The `base` path MUST match the repository name exactly for assets to load correctly on GitHub Pages.
  </action>
  <verify>
Run each command and verify success:
- `npm run lint` - should complete (may have warnings, no errors)
- `npm run typecheck` - should complete with no errors
- `npm run build` - should create dist/ folder with correct asset paths
  </verify>
  <done>
- package.json has lint and typecheck scripts
- vite.config.ts has base: '/gnomad-carrier-frequency/'
- All three commands (lint, typecheck, build) execute successfully
  </done>
</task>

</tasks>

<verification>
1. `npm run lint` executes ESLint successfully
2. `npm run typecheck` passes with no TypeScript errors
3. `npm run build` creates dist/ folder
4. Check dist/index.html references `/gnomad-carrier-frequency/assets/` paths
</verification>

<success_criteria>
- ESLint configured with Vue 3 + TypeScript support using flat config
- lint and typecheck scripts added to package.json
- vite.config.ts has base path for GitHub Pages
- All scripts execute without errors
- Build output has correct asset paths for subdirectory deployment
</success_criteria>

<output>
After completion, create `.planning/phases/04-deploy/04-01-SUMMARY.md`
</output>
