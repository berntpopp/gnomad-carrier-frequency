---
phase: 04-deploy
plan: 03
type: execute
wave: 3
depends_on: ["04-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "GitHub Pages is enabled with 'GitHub Actions' as source"
    - "CI workflow passes (lint + typecheck) on main branch"
    - "Deploy workflow completes and site is accessible"
    - "CFTR shows carrier frequency ~1:25-1:40 for NFE population"
    - "HEXA shows founder effect flag for ASJ population"
  artifacts:
    - path: "GitHub Pages site"
      provides: "Deployed application"
      contains: "gnomAD Carrier Frequency Calculator"
  key_links:
    - from: ".github/workflows/deploy.yml"
      to: "https://username.github.io/gnomad-carrier-frequency/"
      via: "GitHub Pages deployment"
      pattern: "page_url"
---

<objective>
Deploy to GitHub Pages and validate carrier frequency calculations.

Purpose: Complete the project by deploying the application and validating that calculations match published reference values.

Output: Working deployment on GitHub Pages with validated CFTR and HEXA calculations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/04-deploy/04-RESEARCH.md
@.planning/phases/04-deploy/04-01-SUMMARY.md
@.planning/phases/04-deploy/04-02-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Push to main and verify workflow execution</name>
  <files></files>
  <action>
1. Commit all Phase 4 changes (ESLint config, vite.config.ts updates, workflow files):
```bash
git add -A
git commit -m "ci(04): add ESLint, GitHub Actions CI/CD, and Pages deployment

- Add ESLint 9 flat config with Vue 3 + TypeScript support
- Add lint and typecheck scripts to package.json
- Configure vite base path for GitHub Pages subdirectory
- Add CI workflow (lint + typecheck on all branches)
- Add deploy workflow (build + deploy on main)

Co-Authored-By: Claude Opus 4.5 <noreply@anthropic.com>"
```

2. Push to main branch:
```bash
git push origin main
```

3. Check GitHub Actions status:
- Navigate to repository Actions tab
- Verify CI workflow runs and passes (lint + typecheck)
- Verify Deploy workflow runs and completes

4. If GitHub Pages is not enabled:
- Go to repository Settings > Pages
- Under "Build and deployment", select "GitHub Actions" as source
- The deploy workflow will create the github-pages environment automatically

Note: The deploy workflow requires GitHub Pages to be enabled with "GitHub Actions" as the source. If not configured, the workflow will fail with a permissions error.
  </action>
  <verify>
- Check GitHub Actions tab shows both workflows
- CI workflow shows green checkmark
- Deploy workflow shows green checkmark
- Environment shows "github-pages" with deployment URL
  </verify>
  <done>
- Changes pushed to main branch
- CI workflow passes
- Deploy workflow completes
- Site is accessible at https://username.github.io/gnomad-carrier-frequency/
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete gnomAD Carrier Frequency Calculator deployed to GitHub Pages with automated CI/CD.
  </what-built>
  <how-to-verify>
**Step 1: Verify Site Loads**
1. Visit the GitHub Pages URL (shown in deploy workflow output or Settings > Pages)
2. Confirm the wizard interface loads without errors
3. Check browser console for any 404 errors on assets

**Step 2: Validate CFTR Calculation**
1. Enter "CFTR" in gene search field
2. Wait for gnomAD query to complete
3. Navigate to Results step
4. Find NFE (Non-Finnish European) row in population table
5. **Expected:** Carrier frequency approximately 1:25 to 1:40 (2.5-4%)
6. This matches published CFTR carrier frequency for European populations

**Step 3: Validate HEXA Calculation (Founder Effect)**
1. Start new calculation
2. Enter "HEXA" in gene search field
3. Wait for gnomAD query to complete
4. Navigate to Results step
5. Find ASJ (Ashkenazi Jewish) row in population table
6. **Expected:**
   - ASJ carrier frequency approximately 1:25 to 1:35
   - ASJ row should show "Founder Effect" notation (>5x global frequency)
   - ASJ frequency should be significantly higher than NFE (~10x)

**Step 4: Verify German Text Generation**
1. Complete a calculation for CFTR
2. Navigate to Results step
3. Select German language if not default
4. Select a perspective (Betroffener Patient, Anlagetraeger, Familienangehoeriger)
5. Verify German text is generated with:
   - Gene name (CFTR)
   - Carrier frequency
   - Source attribution (gnomAD v4)
   - Recurrence risk
6. Test copy-to-clipboard button

**Validation Ranges (from 04-RESEARCH.md):**
- CFTR NFE: Accept 1:20 to 1:45 as valid (gnomAD may vary slightly from published)
- HEXA ASJ: Accept 1:20 to 1:40 as valid with founder effect flag
  </how-to-verify>
  <resume-signal>
Type "validated" if all checks pass, or describe specific issues found.
  </resume-signal>
</task>

</tasks>

<verification>
1. GitHub Pages site loads at published URL
2. No JavaScript errors in browser console
3. CFTR NFE carrier frequency is in expected range (~1:25-1:40)
4. HEXA ASJ shows founder effect flag
5. German text generation works with copy-to-clipboard
</verification>

<success_criteria>
- Application deployed and accessible on GitHub Pages
- CI workflow runs on every push (lint + typecheck)
- Deploy workflow runs on main pushes and updates site
- CFTR carrier frequency validated against published estimates
- HEXA founder effect in ASJ population verified
- All Phase 4 success criteria from ROADMAP.md satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/04-deploy/04-03-SUMMARY.md`
</output>
