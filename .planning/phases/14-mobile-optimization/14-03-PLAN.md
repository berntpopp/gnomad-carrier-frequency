---
phase: 14-mobile-optimization
plan: 03
type: execute
wave: 2
depends_on: ["14-01", "14-02"]
files_modified:
  - src/components/wizard/TextOutput.vue
  - src/components/FilterPanel.vue
  - src/components/wizard/StepResults.vue
autonomous: false

must_haves:
  truths:
    - "Text output controls stack vertically on mobile"
    - "Filter slider works on mobile without label overlap"
    - "All buttons meet 44x44px minimum touch target size"
    - "Copy/share buttons work correctly on mobile browsers"
  artifacts:
    - path: "src/components/wizard/TextOutput.vue"
      provides: "Responsive control layout"
      contains: "flex-column"
    - path: "src/components/FilterPanel.vue"
      provides: "Mobile-optimized slider"
      contains: "show-ticks"
    - path: "src/components/wizard/StepResults.vue"
      provides: "Touch-friendly buttons"
      contains: "min-height"
  key_links:
    - from: "src/components/wizard/TextOutput.vue"
      to: "mobile breakpoint"
      via: "Vuetify classes"
      pattern: "d-flex.*flex-column.*flex-sm-row"
---

<objective>
Polish mobile experience with responsive controls, touch targets, and mobile-friendly interactions.

Purpose: Addresses MOB-01, MOB-05, MOB-06, MOB-08 - final mobile polish for controls and touch targets.
Output: All controls stack properly on mobile, touch targets meet 44px minimum, copy functionality verified.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/14-mobile-optimization/14-RESEARCH.md
@.planning/phases/14-mobile-optimization/14-01-SUMMARY.md
@.planning/phases/14-mobile-optimization/14-02-SUMMARY.md
@src/components/wizard/TextOutput.vue
@src/components/FilterPanel.vue
@src/components/wizard/StepResults.vue
</context>

<tasks>

<task type="auto">
  <name>Task 1: Make TextOutput controls stack on mobile</name>
  <files>src/components/wizard/TextOutput.vue</files>
  <action>
    Update the v-card-title header row to stack vertically on mobile:

    1. The current header has 4 controls in a flex row: title, language toggle, gender select, patient sex select
    2. Change the v-card-title class from:
       `class="d-flex align-center flex-wrap ga-2 pb-0"`
       to:
       `class="d-flex flex-column flex-sm-row align-start align-sm-center ga-2 pb-0"`

    3. The v-spacer between title and controls won't work well on mobile.
       Wrap controls in a container:
       ```vue
       <v-card-title class="d-flex flex-column flex-sm-row align-start align-sm-center ga-2 pb-0">
         <span>{{ labels.title }}</span>
         <v-spacer class="d-none d-sm-flex" />
         <div class="d-flex flex-wrap align-center ga-2">
           <!-- Language toggle, gender select, patient sex select -->
         </div>
       </v-card-title>
       ```

    4. The v-select components have fixed max-width (160px, 200px). These work on mobile but verify.

    5. The perspective v-btn-toggle may also need wrapping. Check if it fits on mobile.
       If not, add class to allow wrapping: ensure parent div has flex-wrap.

    The goal: on mobile, title appears first, then controls below in a wrapped row.
  </action>
  <verify>
    - Open app on mobile viewport (375px width)
    - Navigate to results step
    - Scroll to "Clinical Text" card
    - Title "Clinical Text" / "Klinischer Text" appears on its own line
    - Language/gender/patient controls appear below, wrapping if needed
    - Perspective buttons are tappable and fit on screen
    - Section chips wrap properly
    - Copy button is easily tappable
  </verify>
  <done>TextOutput header controls stack on mobile, all controls accessible and tappable</done>
</task>

<task type="auto">
  <name>Task 2: Optimize FilterPanel slider for mobile</name>
  <files>src/components/FilterPanel.vue</files>
  <action>
    Check and optimize the ClinVar stars slider for mobile:

    1. Read the current FilterPanel.vue to understand its structure
    2. The slider likely has show-ticks="always" with tick labels 0-4
    3. On mobile, these tick labels can overlap

    Solutions:
    a) Hide tick labels on mobile (keep ticks but no text):
       - Import useDisplay
       - Create computed: `const showTickLabels = computed(() => !smAndDown.value)`
       - Change `:show-ticks="showTickLabels ? 'always' : true"` (true shows ticks without labels)

    b) Or simplify to just show thumb-label (current value) without ticks on mobile:
       - Add `:ticks="smAndDown ? undefined : tickLabels"`
       - This removes tick labels on mobile entirely

    Option (a) is better UX - keeps visual reference of position.

    Also verify:
    - Switches have adequate touch target (v-switch with density="compact" may be too small)
    - If switches are too small, remove density="compact" on mobile or add min-height
  </action>
  <verify>
    - Open app on mobile viewport (375px width)
    - Navigate to results step
    - Expand filter panel (if collapsible) or view filter controls
    - ClinVar stars slider should not have overlapping labels
    - Slider thumb should be easily draggable (touch-friendly)
    - Switch toggles should be easily tappable
  </verify>
  <done>FilterPanel slider works on mobile without label overlap, switches are touch-friendly</done>
</task>

<task type="auto">
  <name>Task 3: Ensure touch targets meet 44x44px minimum</name>
  <files>src/components/wizard/StepResults.vue</files>
  <action>
    Audit and fix touch target sizes in StepResults (main interaction area):

    1. Import useDisplay if not already: `import { useDisplay } from 'vuetify'`
    2. Add: `const { smAndDown } = useDisplay()`

    3. Audit buttons in the "View all variants, export, share" row:
       - v-btn "View all variants" - likely adequate
       - v-btn "Export" dropdown - check size
       - v-btn "Copy link" - check size

    4. For any buttons that may be small, add min-height/min-width for touch targets:
       ```vue
       <v-btn
         :min-height="smAndDown ? 44 : undefined"
         :min-width="smAndDown ? 44 : undefined"
         ...
       >
       ```

    5. Check the "Back" and "Start Over" navigation buttons at bottom - ensure adequate size.

    6. The information icons (mdi-information-outline) with tooltips are small.
       These are informational, not critical actions, so 44px not required.
       But ensure they're at least 24px (WCAG AA minimum).

    7. Verify copy link functionality works on mobile:
       - useClipboard with legacy: true should work on mobile Safari
       - The existing implementation already has this

    WCAG 2.5.8 (AAA) requires 44x44px for all targets.
    WCAG 2.5.5 (AA) requires 24x24px minimum.
    Target: 44px for primary actions, 24px+ for secondary.
  </action>
  <verify>
    - Open app on mobile viewport (375px width)
    - Navigate to results step
    - All primary buttons (View variants, Export, Copy link, Back, Start Over) should be easily tappable
    - No mis-taps due to small touch targets
    - Copy link button works (copies URL to clipboard)
    - Tooltips appear on long-press (mobile) or tap
  </verify>
  <done>All primary action buttons meet 44x44px touch target, copy link works on mobile</done>
</task>

</tasks>

<verification>
After completing all tasks:
1. Test full workflow on mobile viewport (375px width)
2. TextOutput controls stack and wrap properly
3. FilterPanel slider usable without overlapping labels
4. All buttons easily tappable
5. Copy link works on mobile browser
6. `bun run build` succeeds
7. `bun run lint` passes
</verification>

<success_criteria>
- MOB-01: App layout adapts gracefully to viewport widths < 600px
- MOB-05: Touch targets meet minimum 44x44px for primary actions
- MOB-06: Text remains readable without zooming on mobile (no truncation issues)
- MOB-08: Copy/share functionality works on mobile browsers
- All controls accessible and usable on mobile
</success_criteria>

<checkpoint type="human-verify" gate="blocking">
  <what-built>Mobile optimization for Phase 14 - responsive dialogs, scrollable tables, touch-friendly controls</what-built>
  <how-to-verify>
    Test complete workflow on mobile device or browser dev tools (375px width):
    1. Open app - wizard stepper shows all 4 steps
    2. Complete gene search and selection
    3. Select status and frequency source
    4. View results - population table scrolls horizontally
    5. Open variant modal - table scrolls, columns frozen
    6. Open settings - fullscreen dialog, all tabs work
    7. Open log viewer - fills screen width
    8. Tap Copy link - URL copied successfully
    9. Check TextOutput - controls stack properly
    10. All buttons easy to tap, no accidental mis-taps
  </how-to-verify>
  <resume-signal>Type "approved" or describe any mobile issues found</resume-signal>
</checkpoint>

<output>
After completion, create `.planning/phases/14-mobile-optimization/14-03-SUMMARY.md`
</output>
