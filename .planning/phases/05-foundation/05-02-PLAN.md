---
phase: 05-foundation
plan: 02
type: execute
wave: 2
depends_on: ["05-01"]
files_modified:
  - src/components/AppBar.vue
  - src/components/AppFooter.vue
  - src/App.vue
autonomous: true
user_setup: []

must_haves:
  truths:
    - "User sees theme toggle button in app bar"
    - "User can click toggle to switch between light and dark theme"
    - "User sees version number in footer"
    - "User can click version to open GitHub releases page"
    - "Theme choice persists after browser refresh"
  artifacts:
    - path: "src/components/AppBar.vue"
      provides: "App bar with theme toggle button"
      contains: "toggleTheme"
    - path: "src/components/AppFooter.vue"
      provides: "Footer with version display and releases link"
      contains: "VITE_APP_VERSION"
    - path: "src/App.vue"
      provides: "Updated app shell using AppBar and AppFooter"
      contains: "AppBar"
  key_links:
    - from: "src/components/AppBar.vue"
      to: "src/composables/useTheme.ts"
      via: "useAppTheme import"
      pattern: "useAppTheme"
    - from: "src/components/AppFooter.vue"
      to: "import.meta.env.VITE_APP_VERSION"
      via: "version constant"
      pattern: "VITE_APP_VERSION"
    - from: "src/App.vue"
      to: "src/components/AppBar.vue"
      via: "component import"
      pattern: "AppBar"
---

<objective>
Create visible UI components for theme toggle and version display.

Purpose: Give users the ability to switch themes via an app bar button and see the app version in the footer. This completes the Phase 5 requirements by making the infrastructure from Plan 01 accessible to users.

Output: AppBar.vue (with theme toggle), AppFooter.vue (with version), updated App.vue
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-foundation/05-CONTEXT.md
@.planning/phases/05-foundation/05-RESEARCH.md
@.planning/phases/05-foundation/05-01-SUMMARY.md

@src/App.vue
@src/composables/useTheme.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AppBar component with theme toggle</name>
  <files>src/components/AppBar.vue</files>
  <action>
    Create src/components/AppBar.vue:

    Template:
    - v-app-bar component (Vuetify app bar)
    - App title: "gnomAD Carrier Frequency Calculator"
    - v-spacer to push controls to right
    - Theme toggle v-btn with icon variant:
      - @click="toggleTheme()"
      - :title="tooltipText" (for hover tooltip)
      - v-icon inside showing themeIcon

    Script (setup):
    - Import useAppTheme from @/composables
    - Destructure: toggleTheme, tooltipText, themeIcon

    Icon behavior per CONTEXT.md:
    - When dark mode: show sun icon (mdi-weather-sunny) - click switches to light
    - When light mode: show moon icon (mdi-weather-night) - click switches to dark
    - Tooltip shows target state: "Switch to light mode" or "Switch to dark mode"

    Position per CONTEXT.md: right side of app bar
  </action>
  <verify>
    Run `bun run typecheck` - no errors
    Run `bun run lint` - no errors
  </verify>
  <done>
    - AppBar.vue exists with theme toggle button
    - Toggle uses useAppTheme composable
    - Icon and tooltip are reactive to current theme state
    - Button positioned on right side of app bar
  </done>
</task>

<task type="auto">
  <name>Task 2: Create AppFooter component with version display</name>
  <files>src/components/AppFooter.vue</files>
  <action>
    Create src/components/AppFooter.vue:

    Template:
    - v-footer component with app attribute
    - Centered text, text-caption class, text-medium-emphasis
    - Anchor tag linking to GitHub releases:
      - href: https://github.com/berntpopp/gnomad-carrier-frequency/releases
      - target="_blank" rel="noopener noreferrer"
      - Text: v{{ version }} (e.g., "v1.1.0")
      - Subtle styling: text-decoration-none, inherit color

    Script (setup):
    - const version = import.meta.env.VITE_APP_VERSION
    - const releasesUrl = 'https://github.com/berntpopp/gnomad-carrier-frequency/releases'

    Per CONTEXT.md:
    - Format: just version number with 'v' prefix
    - Clickable: links to GitHub releases (new tab)
    - Small, unobtrusive footer text
  </action>
  <verify>
    Run `bun run typecheck` - no errors
    Run `bun run lint` - no errors
  </verify>
  <done>
    - AppFooter.vue exists with version display
    - Version reads from import.meta.env.VITE_APP_VERSION
    - Version is clickable, links to GitHub releases in new tab
    - Footer styling is subtle and unobtrusive
  </done>
</task>

<task type="auto">
  <name>Task 3: Update App.vue to use AppBar and AppFooter</name>
  <files>src/App.vue</files>
  <action>
    Update src/App.vue:

    Template changes:
    - Add AppBar component before v-main
    - Add AppFooter component after v-main
    - Keep existing v-main content (WizardStepper)
    - Move title and subtitle INTO the main content area (below app bar is cleaner)
    - Structure:
      ```
      <v-app>
        <AppBar />
        <v-main>
          <v-container max-width="900">
            <h1>...</h1>
            <p>...</p>
            <WizardStepper />
          </v-container>
        </v-main>
        <AppFooter />
      </v-app>
      ```

    Script changes:
    - Add imports for AppBar and AppFooter components
    - Keep existing WizardStepper import
  </action>
  <verify>
    Run `bun run dev` and verify:
    1. App bar appears at top with title and theme toggle
    2. Footer appears at bottom with version
    3. Theme toggle works - clicking switches between light/dark
    4. Theme persists after page refresh
    5. Version links to GitHub releases in new tab
    6. WizardStepper still renders correctly in main content

    Run `bun run build` - build succeeds
  </verify>
  <done>
    - App.vue uses AppBar and AppFooter components
    - App bar visible at top with theme toggle
    - Footer visible at bottom with version
    - Main content area preserved with WizardStepper
    - Full visual integration complete
  </done>
</task>

</tasks>

<verification>
After completing all tasks:
1. `bun run typecheck` passes
2. `bun run lint` passes
3. `bun run build` succeeds
4. Manual verification in browser:
   - Theme toggle visible and functional
   - Version visible in footer
   - Theme persists across refresh
   - Dark mode properly styles all Vuetify components
</verification>

<success_criteria>
Requirements coverage:
- SHELL-04: User can toggle dark/light theme - Toggle button in app bar
- SHELL-05: Theme preference persists - VueUse useDark with localStorage
- INFRA-01: Version follows semver - 1.1.0 in package.json
- INFRA-02: Version displayed in UI - Footer shows v1.1.0

User observable:
- App bar with theme toggle button (sun/moon icons)
- Footer with clickable version number
- Theme switches instantly on toggle click
- Theme survives browser refresh
</success_criteria>

<output>
After completion, create `.planning/phases/05-foundation/05-02-SUMMARY.md`
</output>
