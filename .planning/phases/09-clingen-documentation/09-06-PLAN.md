---
phase: 09-clingen-documentation
plan: 06
type: execute
wave: 2
depends_on: []
files_modified:
  - src/components/AboutDialog.vue
  - src/components/DataSourcesDialog.vue
  - src/components/AppFooter.vue
  - README.md
autonomous: true

must_haves:
  truths:
    - "User can view project information (About)"
    - "User can see data source versions (gnomAD version)"
    - "README describes project purpose and features"
    - "README includes technology badges"
  artifacts:
    - path: "src/components/AboutDialog.vue"
      provides: "About dialog with project info"
      min_lines: 50
    - path: "src/components/DataSourcesDialog.vue"
      provides: "Data sources attribution dialog"
      min_lines: 40
    - path: "README.md"
      provides: "Project documentation with badges"
      min_lines: 80
  key_links:
    - from: "src/components/AppFooter.vue"
      to: "src/components/AboutDialog.vue"
      via: "component usage"
      pattern: "AboutDialog"
    - from: "src/components/AppFooter.vue"
      to: "src/components/DataSourcesDialog.vue"
      via: "component usage"
      pattern: "DataSourcesDialog"
---

<objective>
Create About and Data Sources dialogs for project attribution, and comprehensive README documentation with technology badges.

Purpose: DOC-01, DOC-02, DOC-08 require README documentation with badges and data source attribution. Per CONTEXT.md, separate About dialog (project info) from Data Sources dialog (versions).

Output: AboutDialog and DataSourcesDialog components integrated into footer, and comprehensive README.md.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-clingen-documentation/09-CONTEXT.md
@.planning/phases/09-clingen-documentation/09-RESEARCH.md

# Existing files
@src/components/AppFooter.vue
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create AboutDialog and DataSourcesDialog components</name>
  <files>src/components/AboutDialog.vue, src/components/DataSourcesDialog.vue</files>
  <action>
Create `src/components/AboutDialog.vue`:

```vue
<template>
  <v-dialog
    v-model="dialog"
    max-width="500"
  >
    <template #activator="{ props }">
      <slot
        name="activator"
        :props="props"
      />
    </template>

    <v-card>
      <v-card-title class="d-flex align-center">
        <v-icon start>mdi-information</v-icon>
        About gCFCalc
        <v-spacer />
        <v-btn
          icon
          variant="text"
          @click="dialog = false"
        >
          <v-icon>mdi-close</v-icon>
        </v-btn>
      </v-card-title>

      <v-divider />

      <v-card-text>
        <div class="text-center mb-4">
          <v-icon
            size="64"
            color="primary"
          >
            mdi-dna
          </v-icon>
          <h2 class="text-h5 mt-2">gnomAD Carrier Frequency Calculator</h2>
          <p class="text-caption text-medium-emphasis">Version {{ version }}</p>
        </div>

        <p class="text-body-2 mb-4">
          A web-based tool for genetic counselors to calculate carrier frequencies
          for autosomal recessive conditions using gnomAD population data.
        </p>

        <v-list density="compact">
          <v-list-item>
            <template #prepend>
              <v-icon size="small">mdi-check</v-icon>
            </template>
            <v-list-item-title class="text-body-2">
              Direct gnomAD GraphQL API queries
            </v-list-item-title>
          </v-list-item>
          <v-list-item>
            <template #prepend>
              <v-icon size="small">mdi-check</v-icon>
            </template>
            <v-list-item-title class="text-body-2">
              Population-specific frequency calculations
            </v-list-item-title>
          </v-list-item>
          <v-list-item>
            <template #prepend>
              <v-icon size="small">mdi-check</v-icon>
            </template>
            <v-list-item-title class="text-body-2">
              German clinical documentation text generation
            </v-list-item-title>
          </v-list-item>
          <v-list-item>
            <template #prepend>
              <v-icon size="small">mdi-check</v-icon>
            </template>
            <v-list-item-title class="text-body-2">
              ClinGen gene-disease validity integration
            </v-list-item-title>
          </v-list-item>
        </v-list>

        <v-divider class="my-4" />

        <div class="text-body-2">
          <strong>Author:</strong> Bernt Popp
        </div>
        <div class="text-body-2 mt-2">
          <strong>License:</strong> MIT License
        </div>

        <div class="d-flex gap-2 mt-4">
          <v-btn
            variant="outlined"
            size="small"
            href="https://github.com/berntpopp/gnomad-carrier-frequency"
            target="_blank"
            rel="noopener noreferrer"
          >
            <v-icon start size="small">mdi-github</v-icon>
            GitHub
          </v-btn>
          <v-btn
            variant="outlined"
            size="small"
            href="https://github.com/berntpopp/gnomad-carrier-frequency/issues"
            target="_blank"
            rel="noopener noreferrer"
          >
            <v-icon start size="small">mdi-bug</v-icon>
            Report Issue
          </v-btn>
        </div>
      </v-card-text>

      <v-divider />

      <v-card-actions>
        <v-spacer />
        <v-btn
          variant="text"
          @click="dialog = false"
        >
          Close
        </v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>
</template>

<script setup lang="ts">
import { ref } from 'vue';

const dialog = ref(false);
const version = import.meta.env.VITE_APP_VERSION;
</script>
```

Create `src/components/DataSourcesDialog.vue`:

```vue
<template>
  <v-dialog
    v-model="dialog"
    max-width="500"
  >
    <template #activator="{ props }">
      <slot
        name="activator"
        :props="props"
      />
    </template>

    <v-card>
      <v-card-title class="d-flex align-center">
        <v-icon start>mdi-database</v-icon>
        Data Sources
        <v-spacer />
        <v-btn
          icon
          variant="text"
          @click="dialog = false"
        >
          <v-icon>mdi-close</v-icon>
        </v-btn>
      </v-card-title>

      <v-divider />

      <v-card-text>
        <p class="text-body-2 mb-4">
          This calculator uses the following data sources:
        </p>

        <!-- gnomAD -->
        <v-card
          variant="outlined"
          class="mb-3"
        >
          <v-card-title class="text-subtitle-1">
            <v-icon start size="small">mdi-database</v-icon>
            gnomAD
          </v-card-title>
          <v-card-text>
            <div class="text-body-2 mb-2">
              Genome Aggregation Database - Population allele frequencies
            </div>
            <div class="d-flex align-center gap-2">
              <v-chip
                size="small"
                color="primary"
                variant="tonal"
              >
                Selected: {{ gnomadVersion }}
              </v-chip>
            </div>
            <div class="text-caption text-medium-emphasis mt-2">
              Available versions: v4.1 (GRCh38), v2.1.1 (GRCh37)
            </div>
            <v-btn
              variant="text"
              size="small"
              class="mt-2 px-0"
              href="https://gnomad.broadinstitute.org/"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit gnomAD
              <v-icon end size="small">mdi-open-in-new</v-icon>
            </v-btn>
          </v-card-text>
        </v-card>

        <!-- ClinVar (from gnomAD) -->
        <v-card
          variant="outlined"
          class="mb-3"
        >
          <v-card-title class="text-subtitle-1">
            <v-icon start size="small">mdi-medical-bag</v-icon>
            ClinVar
          </v-card-title>
          <v-card-text>
            <div class="text-body-2 mb-2">
              Clinical variant annotations - Pathogenicity classifications
            </div>
            <div class="text-caption text-medium-emphasis">
              ClinVar annotations are provided through gnomAD's data integration.
              The ClinVar version corresponds to the gnomAD release date.
            </div>
            <v-btn
              variant="text"
              size="small"
              class="mt-2 px-0"
              href="https://www.ncbi.nlm.nih.gov/clinvar/"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit ClinVar
              <v-icon end size="small">mdi-open-in-new</v-icon>
            </v-btn>
          </v-card-text>
        </v-card>

        <!-- ClinGen -->
        <v-card
          variant="outlined"
          class="mb-3"
        >
          <v-card-title class="text-subtitle-1">
            <v-icon start size="small">mdi-check-decagram</v-icon>
            ClinGen
          </v-card-title>
          <v-card-text>
            <div class="text-body-2 mb-2">
              Gene-Disease Validity curations
            </div>
            <div class="d-flex align-center gap-2">
              <v-chip
                size="small"
                :color="clingenExpired ? 'warning' : 'success'"
                variant="tonal"
              >
                Cache: {{ clingenCacheAge }}
              </v-chip>
              <v-chip
                size="small"
                variant="outlined"
              >
                {{ clingenEntryCount }} entries
              </v-chip>
            </div>
            <div class="text-caption text-medium-emphasis mt-2">
              Data refreshes automatically every 30 days.
            </div>
            <v-btn
              variant="text"
              size="small"
              class="mt-2 px-0"
              href="https://clinicalgenome.org/"
              target="_blank"
              rel="noopener noreferrer"
            >
              Visit ClinGen
              <v-icon end size="small">mdi-open-in-new</v-icon>
            </v-btn>
          </v-card-text>
        </v-card>

        <v-alert
          type="info"
          variant="tonal"
          density="compact"
        >
          <div class="text-caption">
            All data is queried in real-time from these sources.
            No patient data is stored or transmitted.
          </div>
        </v-alert>
      </v-card-text>

      <v-divider />

      <v-card-actions>
        <v-spacer />
        <v-btn
          variant="text"
          @click="dialog = false"
        >
          Close
        </v-btn>
      </v-card-actions>
    </v-card>
  </v-dialog>
</template>

<script setup lang="ts">
import { ref } from 'vue';
import { useGnomadVersion } from '@/api';
import { useClingenValidity } from '@/composables';

const dialog = ref(false);

const { version } = useGnomadVersion();
const gnomadVersion = version;

const {
  isExpired: clingenExpired,
  cacheAge: clingenCacheAge,
  entryCount: clingenEntryCount,
} = useClingenValidity();
</script>
```
  </action>
  <verify>Run `bun run typecheck` - both components compile without errors</verify>
  <done>About and DataSources dialogs created with project info and version attribution</done>
</task>

<task type="auto">
  <name>Task 2: Integrate dialogs into AppFooter</name>
  <files>src/components/AppFooter.vue</files>
  <action>
Update `src/components/AppFooter.vue` to add About and Data Sources buttons, plus disclaimer icon:

```vue
<template>
  <v-footer
    app
    class="text-caption text-medium-emphasis justify-center ga-2"
  >
    <!-- GitHub -->
    <v-tooltip text="Source code on GitHub" location="top">
      <template #activator="{ props }">
        <v-btn
          v-bind="props"
          icon
          variant="text"
          size="small"
          href="https://github.com/berntpopp/gnomad-carrier-frequency"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="Source code on GitHub"
        >
          <v-icon size="small">mdi-github</v-icon>
        </v-btn>
      </template>
    </v-tooltip>

    <span class="mx-1">|</span>

    <!-- Version -->
    <a
      :href="releasesUrl"
      target="_blank"
      rel="noopener noreferrer"
      class="text-decoration-none text-inherit"
    >
      v{{ version }}
    </a>

    <span class="mx-1">|</span>

    <!-- Data Sources Dialog -->
    <DataSourcesDialog>
      <template #activator="{ props }">
        <v-tooltip text="Data sources" location="top">
          <template #activator="{ props: tooltipProps }">
            <v-btn
              v-bind="{ ...props, ...tooltipProps }"
              icon
              variant="text"
              size="small"
              aria-label="View data sources"
            >
              <v-icon size="small">mdi-database</v-icon>
            </v-btn>
          </template>
        </v-tooltip>
      </template>
    </DataSourcesDialog>

    <span class="mx-1">|</span>

    <!-- Methodology Dialog -->
    <MethodologyDialog>
      <template #activator="{ props }">
        <v-tooltip text="Methodology" location="top">
          <template #activator="{ props: tooltipProps }">
            <v-btn
              v-bind="{ ...props, ...tooltipProps }"
              icon
              variant="text"
              size="small"
              aria-label="View calculation methodology"
            >
              <v-icon size="small">mdi-function-variant</v-icon>
            </v-btn>
          </template>
        </v-tooltip>
      </template>
    </MethodologyDialog>

    <!-- FAQ Dialog -->
    <FaqDialog>
      <template #activator="{ props }">
        <v-tooltip text="FAQ" location="top">
          <template #activator="{ props: tooltipProps }">
            <v-btn
              v-bind="{ ...props, ...tooltipProps }"
              icon
              variant="text"
              size="small"
              aria-label="View frequently asked questions"
            >
              <v-icon size="small">mdi-help-circle-outline</v-icon>
            </v-btn>
          </template>
        </v-tooltip>
      </template>
    </FaqDialog>

    <!-- About Dialog -->
    <AboutDialog>
      <template #activator="{ props }">
        <v-tooltip text="About" location="top">
          <template #activator="{ props: tooltipProps }">
            <v-btn
              v-bind="{ ...props, ...tooltipProps }"
              icon
              variant="text"
              size="small"
              aria-label="About this application"
            >
              <v-icon size="small">mdi-information-outline</v-icon>
            </v-btn>
          </template>
        </v-tooltip>
      </template>
    </AboutDialog>

    <span class="mx-1">|</span>

    <!-- Disclaimer (reopen) -->
    <v-tooltip text="View clinical disclaimer" location="top">
      <template #activator="{ props }">
        <v-btn
          v-bind="props"
          icon
          variant="text"
          size="small"
          aria-label="View clinical disclaimer"
          @click="reopenDisclaimer"
        >
          <v-icon size="small">mdi-alert-circle-outline</v-icon>
        </v-btn>
      </template>
    </v-tooltip>
  </v-footer>
</template>

<script setup lang="ts">
import MethodologyDialog from '@/components/MethodologyDialog.vue';
import FaqDialog from '@/components/FaqDialog.vue';
import AboutDialog from '@/components/AboutDialog.vue';
import DataSourcesDialog from '@/components/DataSourcesDialog.vue';
import { useAppStore } from '@/stores/useAppStore';

const version = import.meta.env.VITE_APP_VERSION;
const releasesUrl = 'https://github.com/berntpopp/gnomad-carrier-frequency/releases';

const appStore = useAppStore();

const reopenDisclaimer = () => {
  appStore.resetDisclaimer();
};
</script>

<style scoped>
.text-inherit {
  color: inherit;
}
</style>
```

Footer now has icons for (left to right):
- GitHub
- Version
- Data Sources (database)
- Methodology (function)
- FAQ (help)
- About (info)
- Disclaimer (alert)
  </action>
  <verify>Run `bun run dev` - all footer icons work, dialogs open with correct content</verify>
  <done>All dialogs integrated into footer with tooltips</done>
</task>

<task type="auto">
  <name>Task 3: Create comprehensive README.md</name>
  <files>README.md</files>
  <action>
Replace `README.md` with comprehensive documentation:

```markdown
# gnomAD Carrier Frequency Calculator

![Vue.js](https://img.shields.io/badge/Vue.js-4FC08D?logo=vuedotjs&logoColor=fff)
![TypeScript](https://img.shields.io/badge/TypeScript-3178C6?logo=typescript&logoColor=fff)
![Vite](https://img.shields.io/badge/Vite-646CFF?logo=vite&logoColor=fff)
![Vuetify](https://img.shields.io/badge/Vuetify-1867C0?logo=vuetify&logoColor=fff)
![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)

A web-based tool for genetic counselors to calculate carrier frequencies for autosomal recessive conditions using population allele frequency data from the Genome Aggregation Database (gnomAD).

**Live Demo:** [https://berntpopp.github.io/gnomad-carrier-frequency/](https://berntpopp.github.io/gnomad-carrier-frequency/)

## Features

- **Direct gnomAD Queries** - Queries gnomAD GraphQL API directly from the browser
- **Population-Specific Frequencies** - Calculate carrier frequencies for multiple populations
- **Configurable Filters** - Toggle LoF HC, missense, and ClinVar pathogenicity filters
- **Variant Details** - View contributing variants with HGVS nomenclature and allele frequencies
- **ClinGen Validation** - Automatic gene-disease validity checking against ClinGen curations
- **Gene Constraint Scores** - Display pLI and LOEUF constraint metrics
- **Clinical Text Generation** - Generate German clinical documentation text for patient letters
- **Dark/Light Theme** - Automatic theme detection with manual override

## Quick Start

### Prerequisites

- [Node.js](https://nodejs.org/) 18+ or [Bun](https://bun.sh/) runtime
- Modern web browser (Chrome, Firefox, Safari, Edge)

### Installation

```bash
# Clone the repository
git clone https://github.com/berntpopp/gnomad-carrier-frequency.git
cd gnomad-carrier-frequency

# Install dependencies
bun install
# or: npm install

# Start development server
bun run dev
# or: npm run dev
```

The app will be available at `http://localhost:5173/gnomad-carrier-frequency/`

### Build for Production

```bash
bun run build
# or: npm run build

# Preview production build
bun run preview
```

## Usage

1. **Select gnomAD Version** - Choose between v4.1 (GRCh38) or v2.1.1 (GRCh37)
2. **Search for Gene** - Enter a gene symbol (e.g., CFTR, SMN1, HBB)
3. **Review Validation** - Check ClinGen AR association and gene constraint scores
4. **Select Population** - Choose the population matching patient ancestry
5. **Configure Filters** - Adjust variant filters if needed
6. **View Results** - See carrier frequency, affected frequency, and contributing variants
7. **Generate Text** - Copy clinical text for documentation

## Data Sources

| Source | Description | Version |
|--------|-------------|---------|
| [gnomAD](https://gnomad.broadinstitute.org/) | Population allele frequencies | v4.1 / v2.1.1 |
| [ClinVar](https://www.ncbi.nlm.nih.gov/clinvar/) | Variant pathogenicity classifications | via gnomAD |
| [ClinGen](https://clinicalgenome.org/) | Gene-disease validity curations | Live (30-day cache) |

## Methodology

Carrier frequency is calculated using the Hardy-Weinberg equilibrium principle:

- **q** = Sum of pathogenic variant allele frequencies
- **Carrier frequency** = 2q (heterozygote frequency)
- **Affected frequency** = q² (homozygote frequency)

For detailed methodology, see the Methodology section in the app.

## Technology Stack

- **Framework:** Vue 3 with Composition API
- **UI Library:** Vuetify 3 (Material Design)
- **Build Tool:** Vite 7
- **Language:** TypeScript 5
- **State Management:** Pinia with persistence
- **GraphQL Client:** Villus
- **Deployment:** GitHub Pages

## Development

```bash
# Run linting
bun run lint

# Run type checking
bun run typecheck

# Run build with type checking
bun run build
```

### Project Structure

```
src/
├── api/              # gnomAD GraphQL client and queries
├── components/       # Vue components
│   └── wizard/       # 4-step wizard flow
├── composables/      # Vue composables (use* pattern)
├── config/           # Configuration files and templates
├── stores/           # Pinia stores
├── types/            # TypeScript type definitions
└── utils/            # Utility functions
```

## Disclaimer

**For Research Use Only**

This tool provides carrier frequency estimates based on gnomAD population data. Results are intended for research and educational purposes.

- Results should be verified by a clinical laboratory before use in patient care
- This tool does not replace genetic counseling or clinical judgment
- Population frequencies may not reflect specific patient ancestry

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.

## Author

**Bernt Popp**

- GitHub: [@berntpopp](https://github.com/berntpopp)

## Acknowledgments

- [Genome Aggregation Database (gnomAD)](https://gnomad.broadinstitute.org/) team at the Broad Institute
- [ClinGen](https://clinicalgenome.org/) consortium
- [ClinVar](https://www.ncbi.nlm.nih.gov/clinvar/) at NCBI

## Contributing

Contributions are welcome! Please feel free to submit a Pull Request. For major changes, please open an issue first to discuss what you would like to change.

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request
```
  </action>
  <verify>README renders correctly on GitHub (markdown preview), badges display, links work</verify>
  <done>Comprehensive README with badges, features, usage instructions, and methodology</done>
</task>

</tasks>

<verification>
1. `bun run typecheck` passes
2. `bun run lint` passes
3. `bun run dev`:
   - Footer shows all icons (GitHub, version, database, function, help, info, alert)
   - Data Sources dialog shows gnomAD version and ClinGen cache status
   - About dialog shows project info and links
   - Disclaimer icon reopens disclaimer banner
4. README.md:
   - Badges display correctly
   - All sections present
   - Links are valid
</verification>

<success_criteria>
- AboutDialog shows project information, features, author, license (DOC-01 supporting)
- DataSourcesDialog shows gnomAD version and ClinGen cache status (DOC-08)
- Disclaimer can be reopened from footer icon (DOC-09 supporting)
- README includes technology badges (DOC-02)
- README describes project purpose, features, usage (DOC-01)
- All dialogs accessible from footer
</success_criteria>

<output>
After completion, create `.planning/phases/09-clingen-documentation/09-06-SUMMARY.md`
</output>
