# Milestone v1.2: Sharing & Collaboration

**Status:** âœ… SHIPPED 2026-01-20
**Phases:** 11-15
**Total Plans:** 15

## Overview

Enable reproducible and shareable calculations through URL-based state management, offline-capable PWA support, manual variant curation, mobile optimization, and search history.

## Phases

### Phase 11: URL State Sharing

**Goal**: User can share calculation URLs that reproduce exact parameters and results

**Depends on**: Phase 10 (full feature set to share)

**Plans**: 2 plans

Plans:
- [x] 11-01-PLAN.md - URL state infrastructure (Zod validation, useUrlState composable, App.vue integration)
- [x] 11-02-PLAN.md - Copy link UI (clipboard button in StepResults, visual feedback)

**Details:**
- URL query parameters encode wizard state (gene, filters, settings)
- Opening shared URL restores complete calculation state
- URL updates as user progresses through wizard
- Copy link button available in results step
- Shared URLs work across browser sessions
- Invalid/partial URLs gracefully degrade to defaults

**Completed:** 2026-01-19

---

### Phase 12: PWA

**Goal**: User can install app on device and use offline with cached data

**Depends on**: Phase 11 (URL state for deep linking)

**Plans**: 3 plans

Plans:
- [x] 12-01-PLAN.md - PWA infrastructure (vite-plugin-pwa, icons, manifest, Workbox caching)
- [x] 12-02-PLAN.md - Install and offline UI (usePwaInstall, OfflineIndicator, Settings install section)
- [x] 12-03-PLAN.md - Service worker updates and cache management (usePwaUpdate, cache controls in Settings)

**Details:**
- App has valid web manifest with icons and metadata
- Service worker caches app shell and static assets
- App is installable on desktop and mobile
- Offline fallback page displays when network unavailable
- Previously fetched gene data available offline
- Install prompt shown to eligible users

**Completed:** 2026-01-19

---

### Phase 13: Variant Exclusion

**Goal**: User can manually exclude specific variants from carrier frequency calculations

**Depends on**: Phase 8 (variant table infrastructure)

**Plans**: 4 plans

Plans:
- [x] 13-01-PLAN.md - Exclusion infrastructure (types, config, useExclusionState composable)
- [x] 13-02-PLAN.md - VariantTable integration (checkboxes, visual styling, bulk actions)
- [x] 13-03-PLAN.md - Frequency recalculation (debounced updates, exclusion note in results)
- [x] 13-04-PLAN.md - Export and URL extension (exclusion fields, lz-string compression)

**Details:**
- User can exclude individual variants via checkbox/toggle in variant table
- User can exclude all variants at once via "select all" control
- Excluded variants visually marked in table (strikethrough/dimmed)
- Carrier frequency recalculates in real-time when variants excluded
- Results page shows note when variants have been excluded
- Export includes excluded variants marked as "excluded" with reason field
- Exclusion state persists during session (not across sessions)
- User can restore excluded variants individually or all at once

**Completed:** 2026-01-20

---

### Phase 14: Mobile Optimization

**Goal**: App provides optimal user experience on small screens (phones) with responsive layouts and touch-friendly interactions

**Depends on**: Phase 13 (all features complete to optimize)

**Plans**: 3 plans

Plans:
- [x] 14-01-PLAN.md - Responsive dialogs and stepper (fullscreen dialogs, alt-labels stepper, log panel width)
- [x] 14-02-PLAN.md - Data table optimization (horizontal scroll, frozen columns for VariantTable and StepResults)
- [x] 14-03-PLAN.md - Mobile polish (TextOutput controls, FilterPanel slider, touch targets, verification)

**Details:**
- App layout adapts gracefully to viewport widths < 600px
- Wizard steps display correctly on mobile without horizontal scrolling
- Variant table is usable on small screens (horizontal scroll or responsive layout)
- Settings dialog works on mobile viewport
- Touch targets meet minimum 44x44px accessibility guidelines
- Text remains readable without zooming on mobile
- Modals and dialogs fit within mobile viewport
- Copy/share functionality works on mobile browsers

**Completed:** 2026-01-20

---

### Phase 15: Search History

**Goal**: User can browse, restore, and manage previous calculation results without re-querying

**Depends on**: Phase 14 (mobile-optimized UI for history browsing)

**Plans**: 3 plans

Plans:
- [x] 15-01-PLAN.md - History infrastructure (types, useHistoryStore, useHistoryAutoSave)
- [x] 15-02-PLAN.md - History UI (HistoryPanel, HistoryDrawer, AppBar icon)
- [x] 15-03-PLAN.md - State restoration and settings (useHistoryRestore, Settings history section)

**Details:**
- Completed calculations automatically saved to Pinia store with persistence
- History entry includes gene, filters, results, variants, timestamp, and exclusions
- History browser accessible from app bar (icon/menu)
- User can click history entry to restore full calculation state
- History list shows gene name, date, and key result (carrier frequency)
- User can delete individual history entries
- Automatic cleanup removes oldest entries when limit exceeded (configurable)
- User can clear all history from settings
- History persists across browser sessions (localStorage)
- History works offline (uses cached data)

**Completed:** 2026-01-20

---

## Milestone Summary

**Decimal Phases:**
None - all phases were integer-numbered.

**Key Decisions:**
- Zod for URL param validation (type-safe runtime validation with graceful fallbacks)
- NetworkFirst for API caching (fresh data when online, cached offline)
- registerType: 'prompt' for PWA (user decides when to update)
- Singleton composable pattern for exclusions and history (shared state)
- lz-string for URL compression (compact exclusion encoding)
- 50-entry history default (balance of utility vs storage)
- 500ms debounce for exclusion (smooth recalculation)
- 44px min-height for mobile touch targets (WCAG compliance)

**Issues Resolved:**
- URL state sync with exclusions working bidirectionally
- History entries preserve and restore all state (filters, exclusions)
- Mobile UI works on 375px viewports without horizontal overflow

**Issues Deferred:**
None - all v1.2 requirements met.

**Technical Debt Incurred:**
- ROADMAP.md Phase 15 checkboxes show `[ ]` but all plans are complete (documentation sync issue)

---

_For current project status, see .planning/ROADMAP.md_
